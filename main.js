!function(){"use strict";class e{constructor(e,t,s){this._name=e.name,this._link=e.link,this._cardSelector=t,this._handleImageClick=s}_setEventListeners(){this._cardElement.querySelector(".card__like-button").addEventListener("click",(()=>{this._handleLikeIcon()})),this._cardElement.querySelector(".card__delete-button").addEventListener("click",(()=>{this._handleDeleteCard()})),this._cardElement.querySelector(".card__image").addEventListener("click",(()=>{this._handleImageClick({name:this._name,link:this._link})}))}_handleLikeIcon(){this._cardElement.querySelector(".card__like-button").classList.toggle("card__like-button_active")}_handleDeleteCard(){this._cardElement.remove(),this._cardElement=null}getView(){return this._cardElement=document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0),this._cardElement.querySelector(".card__image").src=this._link,this._cardElement.querySelector(".card__image").alt=this._name,this._cardElement.querySelector(".card__title").textContent=this._name,this._setEventListeners(),this._cardElement}}class t{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=t,this._inputEls=Array.from(this._form.querySelectorAll(this._inputSelector)),this._submitButton=this._form.querySelector(this._submitButtonSelector)}_setEventListeners(){this._toggleButtonState(),this._inputEls.forEach((e=>{e.addEventListener("input",(t=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}_showInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_checkInputValidity(e){if(!e.validity.valid)return this._showInputError(e);this._hideInputError(e)}_hasInvalidInput(){return!this._inputEls.every((e=>e.validity.valid))}_disableSubmitButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}_enableSubmitButton(){this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}_toggleButtonState(){this._hasInvalidInput()?this._disableSubmitButton():this._enableSubmitButton()}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault(),this._disableSubmitButton()})),this._setEventListeners()}}class s{constructor({popupSelector:e}){this._popupElement=document.querySelector(e),this._handleEscClose=this._handleEscClose.bind(this)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose(e){"keydown"===e.type&&"Escape"===e.key&&this.close()}setEventListeners(){this._closeButton=this._popupElement.querySelector(".modal__close"),this._closeButton.addEventListener("click",(()=>{this.close()})),this._popupElement.addEventListener("click",(e=>{this._popupElement.querySelector(".modal__container").contains(e.target)||this.close()}))}}class n extends s{constructor(e,t){super({popupSelector:e}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._handleFormSubmit=t}_getInputValues(){const e={};return this._popupForm.querySelectorAll(".modal__input").forEach((t=>{e[t.name]=t.value})),e}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())}))}close(){super.close()}}const o={inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},r=(document.querySelector(".profile__title"),document.querySelector(".profile__description"),document.querySelector("#profile-title-input")),i=document.querySelector("#profile-description-input"),l=document.querySelector("#profile-edit-modal"),a=l.querySelector(".modal__form"),c=document.querySelector("#add-card-modal"),u=c.querySelector(".modal__form"),d=document.querySelector("#profile-edit-button"),_=(l.querySelector("#modal-close-button"),c.querySelector("#modal-close-button"),document.querySelector(".profile__add-button")),m=new t(o,a),p=new t(o,u);function h(t){return new e(t,"#card-template",y).getView()}m.enableValidation(),p.enableValidation();const E=new class{constructor({items:e,renderer:t},s){this._items=e,this._renderer=t,this._container=document.querySelector(s)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({items:[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago de Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}],renderer:e=>{E.addItem(h(e))}},".cards__list");E.renderItems();const S=new class{constructor(e){this._nameInfo=document.querySelector(e.nameSelector),this._descriptionInfo=document.querySelector(e.descriptionSelector)}getUserInfo(){const e={};return e.name=this._nameInfo.textContent,e.description=this._descriptionInfo.textContent,e}setUserInfo(e){this._nameInfo.textContent=e.name,this._descriptionInfo.textContent=e.description}}({nameSelector:".profile__title",descriptionSelector:".profile__description"}),v=new class extends s{constructor(e){super({popupSelector:e}),this._popupImage=this._popupElement.querySelector("#modal-image"),this._popupTitle=this._popupElement.querySelector("#modal-caption")}open({name:e,link:t}){this._popupImage.src=t,this._popupImage.alt=e,this._popupTitle.textContent=e,super.open()}}("#preview-image-modal");function y(e){v.open(e)}v.setEventListeners();const f=new n("#add-card-modal",(function(e){console.log(e);const t={name:e.title,link:e.Url};E.addItem(h(t)),console.log(t),f.close(),u.reset()}));f.setEventListeners();const b=new n("#profile-edit-modal",(function(e){S.setUserInfo({name:e.title,description:e.description}),b.close()}));b.setEventListeners(),d.addEventListener("click",(()=>{const e=S.getUserInfo();r.value=e.name,i.value=e.description,b.open()})),_.addEventListener("click",(()=>{f.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QzFDcUYsRUFBd0JGLE1BQVEyQyxFQUFnQmIsWUFDaERXLEVBQWlCM0QsTUFBTSxJQUd6QjBCLEVBQWlCbkYsaUJBQWlCLFNBQVMsS0FDekM4RyxFQUFhckQsTUFBTSxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3IoY2FyZERhdGEsIGNhcmRTZWxlY3RvciwgaGFuZGxlSW1hZ2VDbGljaykge1xuICAgIHRoaXMuX25hbWUgPSBjYXJkRGF0YS5uYW1lO1xuICAgIHRoaXMuX2xpbmsgPSBjYXJkRGF0YS5saW5rO1xuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcbiAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrID0gaGFuZGxlSW1hZ2VDbGljaztcbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9jYXJkRWxlbWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIilcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLl9oYW5kbGVMaWtlSWNvbigpO1xuICAgICAgfSk7XG5cbiAgICB0aGlzLl9jYXJkRWxlbWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fZGVsZXRlLWJ1dHRvblwiKVxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNhcmQoKTtcbiAgICAgIH0pO1xuXG4gICAgdGhpcy5fY2FyZEVsZW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayh7IG5hbWU6IHRoaXMuX25hbWUsIGxpbms6IHRoaXMuX2xpbmsgfSk7XG4gICAgICB9KTtcbiAgfVxuXG4gIF9oYW5kbGVMaWtlSWNvbigpIHtcbiAgICB0aGlzLl9jYXJkRWxlbWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIilcbiAgICAgIC5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xuICB9XG5cbiAgX2hhbmRsZURlbGV0ZUNhcmQoKSB7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKCk7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBudWxsO1xuICB9XG5cbiAgZ2V0VmlldygpIHtcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IGRvY3VtZW50XG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG5cbiAgICB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpLnNyYyA9IHRoaXMuX2xpbms7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKS5hbHQgPSB0aGlzLl9uYW1lO1xuICAgIHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGl0bGVcIikudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xuXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3Rvcihjb25maWcsIGZvcm1FbCkge1xuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBjb25maWcuaW5wdXRTZWxlY3RvcjtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IGNvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3M7XG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gY29uZmlnLmlucHV0RXJyb3JDbGFzcztcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gY29uZmlnLmVycm9yQ2xhc3M7XG5cbiAgICB0aGlzLl9mb3JtID0gZm9ybUVsO1xuICAgIHRoaXMuX2lucHV0RWxzID0gQXJyYXkuZnJvbShcbiAgICAgIHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKVxuICAgICk7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgIHRoaXMuX2lucHV0RWxzLmZvckVhY2goKGlucHV0RWwpID0+IHtcbiAgICAgIGlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIChlKSA9PiB7XG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsKTtcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWwpIHtcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbC5pZH0tZXJyb3JgKTtcbiAgICBpbnB1dEVsLmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvck1lc3NhZ2VFbC50ZXh0Q29udGVudCA9IGlucHV0RWwudmFsaWRhdGlvbk1lc3NhZ2U7XG4gICAgZXJyb3JNZXNzYWdlRWwuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcbiAgfVxuXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKSB7XG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWwuaWR9LWVycm9yYCk7XG4gICAgaW5wdXRFbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgZXJyb3JNZXNzYWdlRWwudGV4dENvbnRlbnQgPSBcIlwiO1xuICAgIGVycm9yTWVzc2FnZUVsLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XG4gIH1cblxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWwpIHtcbiAgICBpZiAoIWlucHV0RWwudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHJldHVybiB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsKTtcbiAgICB9XG4gICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbCk7XG4gIH1cblxuICBfaGFzSW52YWxpZElucHV0KCkge1xuICAgIHJldHVybiAhdGhpcy5faW5wdXRFbHMuZXZlcnkoKGlucHV0RWwpID0+IGlucHV0RWwudmFsaWRpdHkudmFsaWQpO1xuICB9XG5cbiAgX2Rpc2FibGVTdWJtaXRCdXR0b24oKSB7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgfVxuXG4gIF9lbmFibGVTdWJtaXRCdXR0b24oKSB7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG4gIH1cblxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XG4gICAgICB0aGlzLl9kaXNhYmxlU3VibWl0QnV0dG9uKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2VuYWJsZVN1Ym1pdEJ1dHRvbigpO1xuICAgIH1cbiAgfVxuXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLl9kaXNhYmxlU3VibWl0QnV0dG9uKCk7XG4gICAgfSk7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IgfSkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xuICB9XG5cbiAgb3BlbigpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX29wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICBfaGFuZGxlRXNjQ2xvc2UoZXZlbnQpIHtcbiAgICBpZiAoZXZlbnQudHlwZSA9PT0gXCJrZXlkb3duXCIgJiYgZXZlbnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fY2xvc2VCdXR0b24gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2VcIik7XG4gICAgdGhpcy5fY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9KTtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldmVudCkgPT4ge1xuICAgICAgaWYgKFxuICAgICAgICAhdGhpcy5fcG9wdXBFbGVtZW50XG4gICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2NvbnRhaW5lclwiKVxuICAgICAgICAgIC5jb250YWlucyhldmVudC50YXJnZXQpXG4gICAgICApIHtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcbiAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcbiAgfVxuXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICBjb25zdCBpbnB1dFZhbHVlcyA9IHt9O1xuICAgIGNvbnN0IGlucHV0VmFsdWVMaXN0ID0gdGhpcy5fcG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2lucHV0XCIpO1xuICAgIGlucHV0VmFsdWVMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICBpbnB1dFZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xuICAgIH0pO1xuICAgIHJldHVybiBpbnB1dFZhbHVlcztcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fcG9wdXBGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2ZW50KSA9PiB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcbiAgICB9KTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHN1cGVyLmNsb3NlKCk7XG4gIH1cbn1cbiIsImV4cG9ydCBjb25zdCBjb25maWcgPSB7XG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX2J1dHRvblwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19idXR0b25fZGlzYWJsZWRcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dF90eXBlX2Vycm9yXCIsXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yX3Zpc2libGVcIixcbn07XG5cbmV4cG9ydCBjb25zdCBwcm9maWxlVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX3RpdGxlXCIpO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCJcbik7XG5cbmV4cG9ydCBjb25zdCBwcm9maWxlVGl0bGVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS10aXRsZS1pbnB1dFwiKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlRGVzY3JpcHRpb25JbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiI3Byb2ZpbGUtZGVzY3JpcHRpb24taW5wdXRcIlxuKTtcblxuZXhwb3J0IGNvbnN0IHByb2ZpbGVFZGl0TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC1tb2RhbFwiKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlRWRpdEZvcm0gPSBwcm9maWxlRWRpdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XG5leHBvcnQgY29uc3QgYWRkQ2FyZE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGQtY2FyZC1tb2RhbFwiKTtcbmV4cG9ydCBjb25zdCBhZGRDYXJkRm9ybUVsZW1lbnQgPSBhZGRDYXJkTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1lZGl0LWJ1dHRvblwiKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlTW9kYWxDbG9zZUJ1dHRvbiA9IHByb2ZpbGVFZGl0TW9kYWwucXVlcnlTZWxlY3RvcihcbiAgXCIjbW9kYWwtY2xvc2UtYnV0dG9uXCJcbik7XG5leHBvcnQgY29uc3QgYWRkQ2FyZE1vZGFsQ2xvc2VCdXR0b24gPSBhZGRDYXJkTW9kYWwucXVlcnlTZWxlY3RvcihcbiAgXCIjbW9kYWwtY2xvc2UtYnV0dG9uXCJcbik7XG5leHBvcnQgY29uc3QgYWRkTmV3Q2FyZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcblxuZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcbiAge1xuICAgIG5hbWU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3lvc2VtaXRlLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJMYWtlIExvdWlzZVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWtlLWxvdWlzZS5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvYmFsZC1tb3VudGFpbnMuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxhdGVtYXJcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGF0ZW1hci5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3Zhbm9pc2UuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxhZ28gZGUgQnJhaWVzXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhZ28uanBnXCIsXG4gIH0sXG5dO1xuIiwiaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xuaW1wb3J0IFBvcHVwIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwLmpzXCI7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xuaW1wb3J0IFwiLi4vcGFnZXMvaW5kZXguY3NzXCI7XG5pbXBvcnQge1xuICBjb25maWcsXG4gIHByb2ZpbGVUaXRsZSxcbiAgcHJvZmlsZURlc2NyaXB0aW9uLFxuICBwcm9maWxlVGl0bGVJbnB1dCxcbiAgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQsXG4gIHByb2ZpbGVFZGl0TW9kYWwsXG4gIHByb2ZpbGVFZGl0Rm9ybSxcbiAgcHJvZmlsZUVkaXRCdXR0b24sXG4gIHByb2ZpbGVNb2RhbENsb3NlQnV0dG9uLFxuICBhZGRDYXJkTW9kYWxDbG9zZUJ1dHRvbixcbiAgYWRkTmV3Q2FyZEJ1dHRvbixcbiAgYWRkQ2FyZE1vZGFsLFxuICBhZGRDYXJkRm9ybUVsZW1lbnQsXG4gIGluaXRpYWxDYXJkcyxcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuXG5jb25zdCBlZGl0Rm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZywgcHJvZmlsZUVkaXRGb3JtKTtcbmNvbnN0IGFkZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWcsIGFkZENhcmRGb3JtRWxlbWVudCk7XG5cbmVkaXRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbmFkZEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG5mdW5jdGlvbiBjcmVhdGVDYXJkKGl0ZW0pIHtcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKGl0ZW0sIFwiI2NhcmQtdGVtcGxhdGVcIiwgaGFuZGxlSW1hZ2VDbGljayk7XG4gIHJldHVybiBjYXJkLmdldFZpZXcoKTtcbn1cblxuY29uc3QgY2FyZExpc3RFbCA9IG5ldyBTZWN0aW9uKFxuICB7XG4gICAgaXRlbXM6IGluaXRpYWxDYXJkcyxcbiAgICByZW5kZXJlcjogKGRhdGEpID0+IHtcbiAgICAgIGNhcmRMaXN0RWwuYWRkSXRlbShjcmVhdGVDYXJkKGRhdGEpKTtcbiAgICB9LFxuICB9LFxuXG4gIFwiLmNhcmRzX19saXN0XCJcbik7XG5cbmNhcmRMaXN0RWwucmVuZGVySXRlbXMoKTtcblxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xuICBuYW1lU2VsZWN0b3I6IFwiLnByb2ZpbGVfX3RpdGxlXCIsXG4gIGRlc2NyaXB0aW9uU2VsZWN0b3I6IFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIsXG59KTtcblxuY29uc3QgY2FyZEltYWdlTW9kYWwgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIjcHJldmlldy1pbWFnZS1tb2RhbFwiKTtcbmNhcmRJbWFnZU1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmZ1bmN0aW9uIGhhbmRsZUltYWdlQ2xpY2soY2FyZERhdGEpIHtcbiAgY2FyZEltYWdlTW9kYWwub3BlbihjYXJkRGF0YSk7XG59XG5cbmNvbnN0IGFkZENhcmRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxuICBcIiNhZGQtY2FyZC1tb2RhbFwiLFxuICBoYW5kbGVBZGRDYXJkRm9ybVN1Ym1pdFxuKTtcbmFkZENhcmRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jb25zdCBlZGl0UHJvZmlsZVBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXG4gIFwiI3Byb2ZpbGUtZWRpdC1tb2RhbFwiLFxuICBoYW5kbGVQcm9maWxlRWRpdFN1Ym1pdFxuKTtcbmVkaXRQcm9maWxlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuZnVuY3Rpb24gaGFuZGxlUHJvZmlsZUVkaXRTdWJtaXQoZm9ybURhdGEpIHtcbiAgdXNlckluZm8uc2V0VXNlckluZm8oe1xuICAgIG5hbWU6IGZvcm1EYXRhLnRpdGxlLFxuICAgIGRlc2NyaXB0aW9uOiBmb3JtRGF0YS5kZXNjcmlwdGlvbixcbiAgfSk7XG4gIGVkaXRQcm9maWxlUG9wdXAuY2xvc2UoKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlQWRkQ2FyZEZvcm1TdWJtaXQoaW5wdXRWYWx1ZXMpIHtcbiAgY29uc29sZS5sb2coaW5wdXRWYWx1ZXMpO1xuICBjb25zdCBuYW1lID0gaW5wdXRWYWx1ZXMudGl0bGU7XG4gIGNvbnN0IGxpbmsgPSBpbnB1dFZhbHVlcy5Vcmw7XG4gIGNvbnN0IGNhcmREYXRhID0geyBuYW1lLCBsaW5rIH07XG4gIGNhcmRMaXN0RWwuYWRkSXRlbShjcmVhdGVDYXJkKGNhcmREYXRhKSk7XG4gIGNvbnNvbGUubG9nKGNhcmREYXRhKTtcbiAgYWRkQ2FyZFBvcHVwLmNsb3NlKCk7XG4gIGFkZENhcmRGb3JtRWxlbWVudC5yZXNldCgpO1xufVxuXG5wcm9maWxlRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBjb25zdCBjdXJyZW50VXNlckluZm8gPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xuICBwcm9maWxlVGl0bGVJbnB1dC52YWx1ZSA9IGN1cnJlbnRVc2VySW5mby5uYW1lO1xuICBwcm9maWxlRGVzY3JpcHRpb25JbnB1dC52YWx1ZSA9IGN1cnJlbnRVc2VySW5mby5kZXNjcmlwdGlvbjtcbiAgZWRpdFByb2ZpbGVQb3B1cC5vcGVuKCk7XG59KTtcblxuYWRkTmV3Q2FyZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBhZGRDYXJkUG9wdXAub3BlbigpO1xufSk7XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY2FyZFNlbGVjdG9yKSB7XG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY2FyZFNlbGVjdG9yKTtcbiAgfVxuXG4gIHJlbmRlckl0ZW1zKCkge1xuICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xuICAgIH0pO1xuICB9XG5cbiAgYWRkSXRlbShlbGVtZW50KSB7XG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3IodXNlckluZm8pIHtcbiAgICB0aGlzLl9uYW1lSW5mbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodXNlckluZm8ubmFtZVNlbGVjdG9yKTtcbiAgICB0aGlzLl9kZXNjcmlwdGlvbkluZm8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgdXNlckluZm8uZGVzY3JpcHRpb25TZWxlY3RvclxuICAgICk7XG4gIH1cblxuICBnZXRVc2VySW5mbygpIHtcbiAgICBjb25zdCB1c2VySW5mbyA9IHt9O1xuICAgIHVzZXJJbmZvLm5hbWUgPSB0aGlzLl9uYW1lSW5mby50ZXh0Q29udGVudDtcbiAgICB1c2VySW5mby5kZXNjcmlwdGlvbiA9IHRoaXMuX2Rlc2NyaXB0aW9uSW5mby50ZXh0Q29udGVudDtcbiAgICByZXR1cm4gdXNlckluZm87XG4gIH1cblxuICBzZXRVc2VySW5mbyh1c2VySW5mbykge1xuICAgIHRoaXMuX25hbWVJbmZvLnRleHRDb250ZW50ID0gdXNlckluZm8ubmFtZTtcbiAgICB0aGlzLl9kZXNjcmlwdGlvbkluZm8udGV4dENvbnRlbnQgPSB1c2VySW5mby5kZXNjcmlwdGlvbjtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xuICAgIHRoaXMuX3BvcHVwSW1hZ2UgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIiNtb2RhbC1pbWFnZVwiKTtcbiAgICB0aGlzLl9wb3B1cFRpdGxlID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbW9kYWwtY2FwdGlvblwiKTtcbiAgfVxuXG4gIG9wZW4oeyBuYW1lLCBsaW5rIH0pIHtcbiAgICB0aGlzLl9wb3B1cEltYWdlLnNyYyA9IGxpbms7XG4gICAgdGhpcy5fcG9wdXBJbWFnZS5hbHQgPSBuYW1lO1xuICAgIHRoaXMuX3BvcHVwVGl0bGUudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIkNhcmQiLCJjb25zdHJ1Y3RvciIsImNhcmREYXRhIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlSW1hZ2VDbGljayIsInRoaXMiLCJfbmFtZSIsIm5hbWUiLCJfbGluayIsImxpbmsiLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRsZUltYWdlQ2xpY2siLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJfY2FyZEVsZW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9oYW5kbGVMaWtlSWNvbiIsIl9oYW5kbGVEZWxldGVDYXJkIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwicmVtb3ZlIiwiZ2V0VmlldyIsImRvY3VtZW50IiwiY29udGVudCIsImNsb25lTm9kZSIsInNyYyIsImFsdCIsInRleHRDb250ZW50IiwiRm9ybVZhbGlkYXRvciIsImNvbmZpZyIsImZvcm1FbCIsIl9pbnB1dFNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIl9mb3JtIiwiX2lucHV0RWxzIiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsIl9zdWJtaXRCdXR0b24iLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJmb3JFYWNoIiwiaW5wdXRFbCIsImUiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiX3Nob3dJbnB1dEVycm9yIiwiZXJyb3JNZXNzYWdlRWwiLCJpZCIsImFkZCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2hpZGVJbnB1dEVycm9yIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oYXNJbnZhbGlkSW5wdXQiLCJldmVyeSIsIl9kaXNhYmxlU3VibWl0QnV0dG9uIiwiZGlzYWJsZWQiLCJfZW5hYmxlU3VibWl0QnV0dG9uIiwiZW5hYmxlVmFsaWRhdGlvbiIsInByZXZlbnREZWZhdWx0IiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwRWxlbWVudCIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJvcGVuIiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJ0eXBlIiwia2V5Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJfY2xvc2VCdXR0b24iLCJjb250YWlucyIsInRhcmdldCIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJfcG9wdXBGb3JtIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJpbnB1dFZhbHVlcyIsImlucHV0IiwidmFsdWUiLCJwcm9maWxlVGl0bGVJbnB1dCIsInByb2ZpbGVEZXNjcmlwdGlvbklucHV0IiwicHJvZmlsZUVkaXRNb2RhbCIsInByb2ZpbGVFZGl0Rm9ybSIsImFkZENhcmRNb2RhbCIsImFkZENhcmRGb3JtRWxlbWVudCIsInByb2ZpbGVFZGl0QnV0dG9uIiwiYWRkTmV3Q2FyZEJ1dHRvbiIsImVkaXRGb3JtVmFsaWRhdG9yIiwiYWRkRm9ybVZhbGlkYXRvciIsImNyZWF0ZUNhcmQiLCJpdGVtIiwiY2FyZExpc3RFbCIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwicmVuZGVySXRlbXMiLCJhZGRJdGVtIiwiZWxlbWVudCIsInByZXBlbmQiLCJkYXRhIiwidXNlckluZm8iLCJfbmFtZUluZm8iLCJuYW1lU2VsZWN0b3IiLCJfZGVzY3JpcHRpb25JbmZvIiwiZGVzY3JpcHRpb25TZWxlY3RvciIsImdldFVzZXJJbmZvIiwiZGVzY3JpcHRpb24iLCJzZXRVc2VySW5mbyIsImNhcmRJbWFnZU1vZGFsIiwiX3BvcHVwSW1hZ2UiLCJfcG9wdXBUaXRsZSIsImFkZENhcmRQb3B1cCIsImNvbnNvbGUiLCJsb2ciLCJ0aXRsZSIsIlVybCIsInJlc2V0IiwiZWRpdFByb2ZpbGVQb3B1cCIsImZvcm1EYXRhIiwiY3VycmVudFVzZXJJbmZvIl0sInNvdXJjZVJvb3QiOiIifQ==